# 有损压缩算法

![image-20200427093117062](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20200427093117062.png)

[toc]

### ![image-20200515205020474](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20200515205020474.png)

### 变换编码

+ 正交变换：变换矩阵T满足$T'=T=I$，即$T'=T^{-1}$



### 离散余弦变换 DCT

+ 偶函数的傅里叶变换是没有虚部的

+ 将信号分解为N（N不宜太大）组基础信号的叠加
+ 离散余弦变换的特性
  + DCT后的信号是原信号的频谱，其中F(0)是直流系数，其它为交流系数. F(0)与原始信号的平均强度成正比。
  + DCT变换是标准正交变换
  + DCT变换是线性变换，即满足：$\Gamma(\alpha p+\beta q)=\alpha \Gamma(p)+\beta \Gamma(q)$
+ 不足：
  + 余弦变换考察整个时域过程（整个时域都有值）的频域特征，对平整的过程有较好的效果，但对非平整过程(比如脉冲信号)不合适
  + 由于对原始图像进行了分块的DCT变换和量化，块之间的变换程度并不统一，所以在高压缩比场合，重建图像在水平和垂直方向会出现晕圈、幻影，产生“方块”效应。
  + 如果不分块或分块很大，那么图像块中像素能量集中到少量系数的效果将变得不明显，不利于对数据进行压缩，同时还使得计算复杂度增加。

### 小波变换 DWT

+ 小波：在整个定义域上只有很小的一段有值的波
+ 小波簇：由小波平移/缩放变换而来

+ 浮点97正交变换：一定会有损失
+ 53变换：做得好的话可能无损

### 嵌入零数小波系数 EZW

+ 解决的问题：在码率一定时获得最佳质量

+ 如何进行编码：
  + 传统：根据每个符号出现概率，给每个符号进行编码

  + 对小波系数进行编码：按照比特平面进行编码

    1. 从最高比特平面开始，将最高比特的1保留下来，要保留的是 **是哪个比特平面** 以及 该**平面上哪些位是1**

    2. 再往下一个平面看

+ 零树结构

  + 所有系数可以分为4类：（用于确定哪些位置上在某些比特平面上有1）

    1. 零树根t：子子孙孙绝对值都小于阈值
    2. 孤独零z：自己小于阈值，子孙绝对值存在大于阈值的
    3. 正大系数p：正数，大于阈值
    4. 负大系数n：负数，绝对值大于阈值

  + 节点父子关系：

    + <img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20200519151501154.png" alt="image-20200519151501154" style="zoom:67%;" />

    + 并定义：1（生成了2、3、4高频分量的低频分量），为2、3、4的父节点

      但是**1没有子节点！**

      <img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20200519232908276.png" alt="image-20200519232908276" style="zoom:80%;" />

+ EZW编码过程：

  1. 选择阈值（对L级小波变换）

     + 最初阈值：不超过最大的小波系数的2的n次幂，即$T_{0}=2^{\left[\log _{2} \operatorname{Max}\left\{\left[c_{i, j}, j\right]\right\}\right.}$
     + 下一次：$T_i=T_{i-1}/2$，$i=1,2,...,L-1$

  2. 主扫描

     + ![image-20200519152829477](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20200519152829477.png)

     + 当一个系数被标记为零树根，其子孙系数不再扫描（图中用 × 表示）
     + 第i次主扫描结束后，将输出为P或N的系数置为0，以免下次主扫描再对他们进行编码

  3. 辅扫描：对正、负系数的幅值进行编码
     + 若系数位于$[T_i，3T_i/2]$，则用0表示，否则用1表示

       举个例子，阈值=32

       <img src="C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\image-20200519160621772.png" alt="image-20200519160621772" style="zoom:80%;" />

+ 最初阈值：不超过最大的小波系数的2的n次幂，即$T_{0}=2^{\left[\log _{2} \operatorname{Max}\left\{\left[c_{i, j}, j\right]\right\}\right.}$

+ 下一次扫描

  + 阈值：上一次阈值/2，即对$L$级小波变换，$T_{i}=T_{i-1} / 2$，$i=1,2,...,L-1$
  + 正大系数全部清零，重新扫描

+ 当前阈值$S_i$，得到编码后，编码上孤独零$z$和正大系数$p$位置处的第$S_i$位比特是1

