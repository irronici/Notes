# 数据库中的数据交换

[TOC]

### 数据交换的管理

+ 会话管理

+ 连接管理

  + 负责数据在主、客体间建立实质性的关联
  + 连接语句：CONNECT TO <连接目标>
    <连接目标>::=<服务器名> \[AS<连接名>][USER<用户名>]
  + 断开连接语句：DISCONNECT <断开对象>
      <断开对象>::=<连接名> | ALL | CURRENT

+ 游标管理：将SQL变量中的集合量逐个取出

  + 游标操作
    + Declare
    + Open 
    + Fetch
    + Close

+ 诊断管理：数据交换时，数据主体发出数据交换请求后，数据客体返回两种信息：所请求的数据，执行的状态值，又称诊断值，诊断值相关的管理为诊断管理

+ 动态SQL

  + 可变性

    + 正文状态可变
    + 变量个数可变
    + 类型可变
    + SQL语句引用对象可变

  + 静态 vs. 动态

      |         | 优点                   | 缺点                                  |
      | ------- | ---------------------- | :------------------------------------ |
      | 静态SQL | 性能好                 | 访问路径不一定最优                    |
      | 动态SQL | 运行时选择最优访问路径 | 动态进行SQL语句语法分析，访问路径选择 |
    
  + 什么时候需要动态SQL
  
      + 应用程序需要在执行过程中生成SQL语句
      + SQL语句用到的对象在预编译时刻不存在
      + 希望SQL语句使用最优访问策略
  
  + 有关的动态SQL使用语句
  
      + prepare语句
      + describe语句
      + execute语句
  
    

